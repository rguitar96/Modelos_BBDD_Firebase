<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">

<script src="../scripts/main.js"></script>

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="my-icons.html">

<link rel="import" href="../bower_components/iron-behaviors/iron-button-state.html">
<link rel="import" href="../bower_components/paper-input/paper-input-addon-behavior.html">
<link rel="import" href="../bower_components/paper-input/paper-input-behavior.html">
<link rel="import" href="../bower_components/paper-input/paper-input-char-counter.html">

<link rel="import" href="../bower_components/iron-checked-element-behavior/iron-checked-element-behavior.html">
<link rel="import" href="../bower_components/iron-form-element-behavior/iron-form-element-behavior.html">
<link rel="import" href="../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">
<link rel = "import" href = "../bower_components/polymerfire/firebase-auth.html">
<link rel = "import" href = "../bower_components/polymerfire/firebase-document.html">

<dom-module id="my-perfil">
    <template>
        <style include="shared-styles">
            :host {
                display: block;

                padding: 10px;
            }
            /*paper-input {
                max-width: 400px;
                margin: auto;
            }
            iron-icon, div[suffix] {
                color: hsl(0, 0%, 50%);
                margin-right: 12px;
            }*/
            .contenedor {
                display: flex;
                max-width: 500px;
                margin: auto;
            }
            .img-perfil {
                height: 150px;
                width: 125px;
                margin-right: 50px;
            }
            paper-toast {
                width: 300px;
                margin-left: calc(50vw - 150px);
            }

        </style>

        <firebase-auth id="auth" user="{{user}}" provider="google" on-error="handleError">
        </firebase-auth>
        <firebase-document
            path="/usuarios/[[user.uid]]"
            data="{{usuario}}">
        </firebase-document>


        <div class="card">
            <!--<div class="circle">1</div>-->
            <paper-toast id="toast" text="Perfil modificado"></paper-toast>
            <h1>Perfil</h1>
            <div class="contenedor">
                <div>
                    <img class="img-perfil" src="{{usuario.imagen}}" alt="Logotipo OT" width="800" height="500">
                </div>
                <div>
                    <paper-input always-float-label label="Nombre" value="{{usuario.nombre}}" readonly="readonly"></paper-input>
                    <paper-input always-float-label label="Apellidos" value="{{usuario.apellidos}}" readonly="readonly"></paper-input>
                    <paper-input always-float-label label="Correo" value="{{usuario.correo}}" readonly="readonly">
                        <iron-icon icon="mail" slot="prefix"></iron-icon>
                        <!--<div slot="suffix">@email.com</div>-->
                    </paper-input>
                    <form>
                        <p><paper-checkbox id="check" on-click="toggleChecked" >Perfil p√∫blico</paper-checkbox></p>
                        <paper-button on-click="modificar" class="mdl-button mdl-js-button mdl-button--raised" raised>Guardar</paper-button>

                    </form>
                </div>

            </div>
        </div>

    </template>

    <script>
class MyPerfil extends Polymer.Element {
    static get is() {
        return 'my-perfil';
    }
    static get properties() {
        return {
            user: {
                type: Object,
                observer: '_publico'

            },
            usuario: {
                type: Object,
                observer: '_publico'
            },
            statusKnown: {
                type: Object
            }
        }
    }
    print() {
        alert(this.user);

    }
    _publico() {
        if (this.usuario.publico === undefined || !this.usuario.publico) { //es publico
            this.$.check.checked = false;
        } else {
            this.$.check.checked = true;
        }
    }
    modificar() {
        var publico = this.$.check.checked;
       /* if (this.$.check.checked) {
            privado = false;
        } else {
            privado = true;
        }*/
        console.log('checked: '+this.$.check.checked)
        console.log('privado: '+publico)
        
        var nombreAux = this.usuario.nombre;


        firebase.database().ref('usuarios/' + this.user.uid).update({
            publico: publico
        });
        this.$.toast.open();
    }
    toggleChecked() {
        /*if(this.checked==='checked'){
         this.checked='';
         }else {
         this.checked='checked';
         }*/
    }
}

window.customElements.define(MyPerfil.is, MyPerfil);
    </script>
</dom-module>
